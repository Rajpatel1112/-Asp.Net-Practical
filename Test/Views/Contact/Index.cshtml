@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model IEnumerable<Contact>

<button id="addButton" class="btn btn-primary">Add</button>

<table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var contact in Model)
        {
            <tr>
                <td>@contact.Name</td>
                <td>@contact.Email</td>
                <td>@contact.Phone</td>
                <td>
                    <button class="btn btn-warning btn-sm editButton" data-id="@contact.Id">Edit</button>
                    <button class="btn btn-danger btn-sm deleteButton" data-id="@contact.Id">Delete</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<div id="modalContainer"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function () {
        $('#addButton').click(function () {
            $.get('@Url.Action("Create")', function (data) {
                $('#modalContainer').html(data);
                $('#createModal').modal('show');
            });
        });

        $('.editButton').click(function () {
            var id = $(this).data('id');
            $.get('@Url.Action("Edit")', { id: id }, function (data) {
                $('#modalContainer').html(data);
                $('#editModal').modal('show');
            });
        });

        $('.deleteButton').click(function () {
            var id = $(this).data('id');
            if (confirm('Are you sure you want to delete this contact?')) {
                $.post('@Url.Action("Delete")', { id: id }, function () {
                    location.reload();
                });
            }
        });
    });
</script>

